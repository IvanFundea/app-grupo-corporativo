<form [formGroup]="form()" (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- Nombres -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Primer nombre</label>
  <input type="text" formControlName="nombre1" class="input-control"/>
      @if (form().get('nombre1')?.touched && form().get('nombre1')?.invalid) {
        <div class="text-red-600 text-xs mt-1">Requerido (min 2)</div>
      }
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Segundo nombre</label>
  <input type="text" formControlName="nombre2" class="input-control"/>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Tercer nombre</label>
  <input type="text" formControlName="nombre3" class="input-control"/>
    </div>
  </div>

  <!-- Apellidos -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Primer apellido</label>
  <input type="text" formControlName="apellido1" class="input-control"/>
      @if (form().get('apellido1')?.touched && form().get('apellido1')?.invalid) {
        <div class="text-red-600 text-xs mt-1">Requerido (min 2)</div>
      }
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Segundo apellido</label>
  <input type="text" formControlName="apellido2" class="input-control"/>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Tercer apellido</label>
  <input type="text" formControlName="apellido3" class="input-control"/>
    </div>
  </div>

  <!-- Username y correo -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Usuario</label>
  <input type="text" formControlName="userName" class="input-control"/>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Correo</label>
  <input type="email" formControlName="correo" class="input-control"/>
      @if (form().get('correo')?.touched && form().get('correo')?.invalid) {
        <div class="text-red-600 text-xs mt-1">Correo inválido</div>
      }
    </div>
  </div>

  <!-- Password (solo al crear) -->
  @if (nuevo()) {
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
  <input type="password" formControlName="clave" class="input-control"/>
      @if (form().get('clave')?.touched && form().get('clave')?.invalid) {
        <div class="text-red-600 text-xs mt-1">Mínimo 6 caracteres</div>
      }
    </div>
  }

  <!-- Rol y Puesto -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
  <select formControlName="rolId" class="input-control">
        <option value="">Seleccione un rol</option>
        @for (rol of (roles() || []); track rol.rolId) {
          <option [value]="rol.rolId">{{ rol.nombre }}</option>
        }
      </select>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Puesto</label>
  <select formControlName="puestoId" class="input-control">
        <option value="">(Opcional) Seleccione un puesto</option>
        @for (p of (puestos() || []); track p.puestoId) {
          <option [value]="p.puestoId">{{ p.nombre }}</option>
        }
      </select>
    </div>
  </div>

  <!-- Activo -->
  <div class="flex items-center">
    <label class="relative inline-flex items-center cursor-pointer">
      <input type="checkbox" formControlName="activo" class="sr-only peer"/>
      <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-400 rounded-full peer dark:bg-gray-700 peer-checked:bg-blue-600 transition-colors"></div>
      <div class="absolute top-1/2 left-0.5 -translate-y-1/2 w-5 h-5 bg-white rounded-full shadow-md transition-transform peer-checked:translate-x-5"></div>
      <span class="ml-3 text-sm font-medium text-gray-700">Activo</span>
    </label>
  </div>

  <!-- Botones -->
  <div class="flex justify-end space-x-3 pt-2">
    <button type="button" (click)="onCancel()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">Cancelar</button>
    <button type="submit" [disabled]="form().invalid" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50">{{ btnText }}</button>
  </div>
</form>
